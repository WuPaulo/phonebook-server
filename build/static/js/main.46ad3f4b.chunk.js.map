{"version":3,"sources":["services/getPersons.js","Filter.js","Form.js","Persons.js","Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","value","onChange","Form","onSubmit","newName","newNumber","numberChange","nameChange","type","Persons","persons","deleteClick","map","person","i","name","number","onClick","Notification","notificationType","message","className","App","useState","setPersons","setNewName","setNewNumber","nameFilter","setNameFilter","filteredName","setFilteredName","errorMessage","setErrorMessage","setNotificationType","useEffect","getPersons","initialPersons","personTobeDeleted","window","confirm","_id","filter","setTimeout","e","target","toLowerCase","includes","preventDefault","duplicate","some","index","find","indexPerson","returnedPerson","catch","error","personObj","length","concat","ReactDOM","render","document","getElementById"],"mappings":"6LACMA,EAAU,oCAsBD,EApBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAACC,GAAD,OAAcA,EAASC,SAkB9B,EAfA,SAACC,GAEd,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAa9B,EALA,SAACG,EAAIF,GAElB,OADgBL,IAAMQ,IAAN,UAAaT,EAAb,YAAwBQ,GAAMF,GAC/BH,MAAK,SAACC,GAAD,OAAcA,EAASC,SAG9B,EAVU,SAACG,GAExB,OADgBP,IAAMS,OAAN,UAAgBV,EAAhB,YAA2BQ,IAC5BL,MAAK,SAACC,GAAD,OAAcA,EAASC,S,OCJ9BM,EATA,SAAC,GAAyB,IAAvBC,EAAsB,EAAtBA,MAAOC,EAAe,EAAfA,SACvB,OACE,mDAEE,uBAAOD,MAAOA,EAAOC,SAAUA,QCctBC,EAlBF,SAAC,GAAgE,IAA9DC,EAA6D,EAA7DA,SAAUC,EAAmD,EAAnDA,QAASC,EAA0C,EAA1CA,UAAWC,EAA+B,EAA/BA,aAAcC,EAAiB,EAAjBA,WAC1D,OACE,8BACE,uBAAMJ,SAAUA,EAAhB,UACE,yCACQ,uBAAOH,MAAOI,EAASH,SAAUM,OAEzC,2CACU,uBAAOP,MAAOK,EAAWJ,SAAUK,OAE7C,8BACE,wBAAQE,KAAK,SAAb,yBCIKC,EAfC,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,QAASC,EAAkB,EAAlBA,YAC1B,OACE,8BACGD,EAAQE,KAAI,SAACC,EAAQC,GAAT,OACX,6BACE,8BACGD,EAAOE,KADV,IACiBF,EAAOG,OAAQ,IAC9B,wBAAQC,QAAS,kBAAMN,EAAYE,IAAnC,wBAHKC,SCQFI,EAZM,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,iBAAkBC,EAAc,EAAdA,QACxC,OAAyB,OAArBD,EACK,KAEgB,YAArBA,EACK,qBAAKE,UAAU,UAAf,SAA0BD,IAEV,UAArBD,EACK,qBAAKE,UAAU,QAAf,SAAwBD,SADjC,GC8JaE,G,MA/JH,WACV,MAA8BC,mBAAS,IAAvC,mBAAOb,EAAP,KAAgBc,EAAhB,KACA,EAA8BD,mBAAS,IAAvC,mBAAOnB,EAAP,KAAgBqB,EAAhB,KACA,EAAkCF,mBAAS,IAA3C,mBAAOlB,EAAP,KAAkBqB,EAAlB,KACA,EAAoCH,mBAAS,IAA7C,mBAAOI,EAAP,KAAmBC,EAAnB,KACA,EAAwCL,mBAAS,IAAjD,mBAAOM,EAAP,KAAqBC,EAArB,KACA,EAAwCP,mBAAS,MAAjD,mBAAOQ,EAAP,KAAqBC,EAArB,KACA,EAAgDT,mBAAS,MAAzD,mBAAOJ,EAAP,KAAyBc,EAAzB,KAIAC,qBAAU,WACRC,IAAoB5C,MAAK,SAAC6C,GACxBZ,EAAWY,QAEZ,IAEH,IAiGMzB,EAAc,SAAC0B,GACfC,OAAOC,QAAP,iBAAyBF,EAAkBtB,KAA3C,SACFoB,EACoBE,EAAkBG,KACnCjD,KACCiC,EACEd,EAAQ+B,QACN,SAAC5B,GAAD,OAAYA,EAAM,MAAYwB,EAAiB,SAIvDJ,EAAoB,WACpBD,EAAgB,WAAD,OAAY5B,EAAZ,oBACfsC,YAAW,WACTV,EAAgB,QACf,OAIP,OACE,gCACE,2CACA,cAAC,EAAD,CACEb,iBAAkBA,EAClBC,QAASW,IAEX,cAAC,EAAD,CAAQ/B,MAAO2B,EAAY1B,SAnCV,SAAC0C,GACpBf,EAAce,EAAEC,OAAO5C,OACvB8B,EACEpB,EAAQ+B,QAAO,SAAC5B,GAAD,OACbA,EAAOE,KAAK8B,cAAcC,SAASH,EAAEC,OAAO5C,MAAM6C,sBAgCpD,kDACA,cAAC,EAAD,CACE1C,SA9HY,SAACwC,GACjBA,EAAEI,iBAEF,IAAMC,EAAYtC,EAAQuC,MAAK,SAACnC,GAAD,OAC7BA,EAAEC,KAAK8B,cAAcC,SAAS1C,EAAQyC,kBAGxC,GAAKG,GAiCE,GAAIA,GAEPV,OAAOC,QAAP,UACKnC,EADL,2EAGA,CACA,IAAM8C,EAAQxC,EAAQyC,MACpB,SAACtC,GAAD,OAAYA,EAAOE,KAAK8B,gBAAkBzC,EAAQyC,iBAE9CO,EAAW,2BAAQF,GAAR,IAAelC,OAAQX,IACxC8B,EACUe,EAAMV,IAAKY,GAClB7D,MAAK,SAAC8D,GACL7B,EACEd,EAAQE,KAAI,SAACC,GAAD,OACVA,EAAOjB,KAAOsD,EAAMV,IAAM3B,EAASwC,MAGvCpB,EAAoB,WACpBD,EAAgB,SAAD,OAAU5B,EAAV,sBACfsC,YAAW,WACTV,EAAgB,QACf,QAEJsB,OAAM,SAACC,GACNtB,EAAoB,SACpBD,EAAgB,WAAD,OACFtB,EAAQK,KADN,sCAGf2B,YAAW,WACTV,EAAgB,QACf,aAhEK,CACd,IAAMwB,EAAY,CAAEzC,KAAMX,EAASY,OAAQX,GAEvCD,EAAQqD,QAAU,GACpBxB,EAAoB,SACpBD,EAAgB,+CAChBU,YAAW,WACTV,EAAgB,QACf,MACM3B,EAAUoD,QAAU,GAC7BxB,EAAoB,SACpBD,EAAgB,0CAChBU,YAAW,WACTV,EAAgB,QACf,MAEHG,EACUqB,GACPjE,MAAK,SAAC8D,GACL7B,EAAWd,EAAQgD,OAAOL,IAC1BrB,EAAgB,SAAD,OAAU5B,IACzBsC,YAAW,WACTV,EAAgB,QACf,QAEJsB,OAAM,SAACC,GACNtB,EAAoB,SACpBD,EAAgB,GAAD,OAAIuB,EAAM/D,SAASC,KAAK8D,QACvCb,YAAW,WACTV,EAAgB,QACf,QAuCXP,EAAW,IACXC,EAAa,KAkDTtB,QAASA,EACTC,UAAWA,EACXE,WAjDa,SAACoC,GAClBlB,EAAWkB,EAAEC,OAAO5C,QAiDhBM,aA9Ce,SAACqC,GACpBjB,EAAaiB,EAAEC,OAAO5C,UA+CpB,yCACC2B,EAAW8B,OAAS,EACnB,cAAC,EAAD,CAAS/C,QAASmB,EAAclB,YAAaA,IAE7C,cAAC,EAAD,CAASD,QAASA,EAASC,YAAaA,SC7JhDgD,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.46ad3f4b.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"http://localhost:3001/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deleteObjectById = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  deleteObjectById,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ value, onChange }) => {\r\n  return (\r\n    <div>\r\n      Filter Phonebook\r\n      <input value={value} onChange={onChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst Form = ({ onSubmit, newName, newNumber, numberChange, nameChange }) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmit}>\r\n        <div>\r\n          name: <input value={newName} onChange={nameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={numberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, deleteClick }) => {\r\n  return (\r\n    <div>\r\n      {persons.map((person, i) => (\r\n        <li key={i}>\r\n          <p>\r\n            {person.name} {person.number}{\" \"}\r\n            <button onClick={() => deleteClick(person)}>Delete</button>\r\n          </p>\r\n        </li>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ notificationType, message }) => {\r\n  if (notificationType === null) {\r\n    return null;\r\n  }\r\n  if (notificationType === \"success\") {\r\n    return <div className=\"success\">{message}</div>;\r\n  }\r\n  if (notificationType === \"error\") {\r\n    return <div className=\"error\">{message}</div>;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import getPersons from \"./services/getPersons\";\nimport React, { useState, useEffect } from \"react\";\nimport Filter from \"./Filter\";\nimport Form from \"./Form\";\nimport Persons from \"./Persons\";\nimport Notification from \"./Notification\";\nimport \"./index.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [nameFilter, setNameFilter] = useState(\"\");\n  const [filteredName, setFilteredName] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const [notificationType, setNotificationType] = useState(null);\n\n  // const [errorType, setErrorType] = useState(null);\n\n  useEffect(() => {\n    getPersons.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const addPerson = (e) => {\n    e.preventDefault();\n\n    const duplicate = persons.some((i) =>\n      i.name.toLowerCase().includes(newName.toLowerCase())\n    );\n\n    if (!duplicate) {\n      const personObj = { name: newName, number: newNumber };\n\n      if (newName.length <= 3) {\n        setNotificationType(\"error\");\n        setErrorMessage(`Name must be at least three characters long`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 3000);\n      } else if (newNumber.length <= 8) {\n        setNotificationType(\"error\");\n        setErrorMessage(`Number must be at least 8 digits long `);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 3000);\n      } else {\n        getPersons\n          .create(personObj)\n          .then((returnedPerson) => {\n            setPersons(persons.concat(returnedPerson));\n            setErrorMessage(`Added ${newName}`);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 3000);\n          })\n          .catch((error) => {\n            setNotificationType(\"error\");\n            setErrorMessage(`${error.response.data.error}`);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 3000);\n          });\n      }\n    } else if (duplicate) {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const index = persons.find(\n          (person) => person.name.toLowerCase() === newName.toLowerCase()\n        );\n        const indexPerson = { ...index, number: newNumber };\n        getPersons\n          .update(index._id, indexPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== index._id ? person : returnedPerson\n              )\n            );\n            setNotificationType(\"success\");\n            setErrorMessage(`Added ${newName} to the phonebook`);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 3000);\n          })\n          .catch((error) => {\n            setNotificationType(\"error\");\n            setErrorMessage(\n              `person '${persons.name}' was already removed from server`\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          });\n      }\n    }\n\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const nameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const numberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const filterChange = (e) => {\n    setNameFilter(e.target.value);\n    setFilteredName(\n      persons.filter((person) =>\n        person.name.toLowerCase().includes(e.target.value.toLowerCase())\n      )\n    );\n  };\n\n  const deleteClick = (personTobeDeleted) => {\n    if (window.confirm(`Delete ${personTobeDeleted.name} ?`)) {\n      getPersons\n        .deleteObjectById(personTobeDeleted._id)\n        .then(\n          setPersons(\n            persons.filter(\n              (person) => person[\"_id\"] !== personTobeDeleted[\"_id\"]\n            )\n          )\n        );\n      setNotificationType(\"success\");\n      setErrorMessage(`Deleted ${newName} from phonebook`);\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 3000);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification\n        notificationType={notificationType}\n        message={errorMessage}\n      />\n      <Filter value={nameFilter} onChange={filterChange} />\n      <h2>Add a New Person</h2>\n      <Form\n        onSubmit={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        nameChange={nameChange}\n        numberChange={numberChange}\n      />\n      <h2>Numbers</h2>\n      {nameFilter.length > 0 ? (\n        <Persons persons={filteredName} deleteClick={deleteClick}></Persons>\n      ) : (\n        <Persons persons={persons} deleteClick={deleteClick}></Persons>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}
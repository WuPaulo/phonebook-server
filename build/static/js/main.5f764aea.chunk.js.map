{"version":3,"sources":["services/getPersons.js","Filter.js","Form.js","Persons.js","Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","value","onChange","Form","onSubmit","newName","newNumber","numberChange","nameChange","type","Persons","persons","deleteClick","map","person","i","name","number","onClick","Notification","message","errorMessages","className","App","useState","setPersons","setNewName","setNewNumber","nameFilter","setNameFilter","filteredName","setFilteredName","errorMessage","setErrorMessage","useEffect","getPersons","initialPersons","personTobeDeleted","window","confirm","filter","setTimeout","e","target","toLowerCase","includes","preventDefault","duplicate","some","index","find","indexPerson","console","log","returnedPerson","catch","error","concat","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5f764aea.chunk.js","sourcesContent":["import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deleteObjectById = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  update,\r\n  deleteObjectById,\r\n};\r\n","import React from \"react\";\r\n\r\nconst Filter = ({ value, onChange }) => {\r\n  return (\r\n    <div>\r\n      Filter Phonebook\r\n      <input value={value} onChange={onChange} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from \"react\";\r\n\r\nconst Form = ({ onSubmit, newName, newNumber, numberChange, nameChange }) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={onSubmit}>\r\n        <div>\r\n          name: <input value={newName} onChange={nameChange} />\r\n        </div>\r\n        <div>\r\n          number: <input value={newNumber} onChange={numberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, deleteClick }) => {\r\n  return (\r\n    <div>\r\n      {persons.map((person, i) => (\r\n        <li key={i}>\r\n          <p>\r\n            {person.name} {person.number}{\" \"}\r\n            <button onClick={() => deleteClick(person)}>Delete</button>\r\n          </p>\r\n        </li>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, errorMessages }) => {\r\n  if (message === null) {\r\n    return null;\r\n  } else {\r\n    return <div className=\"notification\">{message}</div>;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import getPersons from \"./services/getPersons\";\nimport React, { useState, useEffect } from \"react\";\nimport Filter from \"./Filter\";\nimport Form from \"./Form\";\nimport Persons from \"./Persons\";\nimport Notification from \"./Notification\";\nimport \"./index.css\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [nameFilter, setNameFilter] = useState(\"\");\n  const [filteredName, setFilteredName] = useState([]);\n  const [errorMessage, setErrorMessage] = useState(null);\n  // const [errorType, setErrorType] = useState(null);\n\n  useEffect(() => {\n    getPersons.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const addPerson = (e) => {\n    e.preventDefault();\n\n    const duplicate = persons.some((i) =>\n      i.name.toLowerCase().includes(newName.toLowerCase())\n    );\n\n    if (!duplicate) {\n      const personObj = { name: newName, number: newNumber };\n      getPersons.create(personObj).then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n        setErrorMessage(`Added ${newName}`);\n        setTimeout(() => {\n          setErrorMessage(null);\n        }, 3000);\n      });\n    } else if (duplicate) {\n      if (\n        window.confirm(\n          `${newName} is already added to phonebook, replace the old number with a new one?`\n        )\n      ) {\n        const index = persons.find(\n          (person) => person.name.toLowerCase() === newName.toLowerCase()\n        );\n        const indexPerson = { ...index, number: newNumber };\n        console.log(index.id);\n        getPersons\n          .update(index.id, indexPerson)\n          .then((returnedPerson) => {\n            setPersons(\n              persons.map((person) =>\n                person.id !== index.id ? person : returnedPerson\n              )\n            );\n            setErrorMessage(`Changed ${newName}'s number`);\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 3000);\n          })\n          .catch((error) => {\n            setErrorMessage(\n              `person '${persons.name}' was already removed from server`\n            );\n            setTimeout(() => {\n              setErrorMessage(null);\n            }, 5000);\n          });\n      }\n    }\n\n    setNewName(\"\");\n    setNewNumber(\"\");\n  };\n\n  const nameChange = (e) => {\n    setNewName(e.target.value);\n  };\n\n  const numberChange = (e) => {\n    setNewNumber(e.target.value);\n  };\n\n  const filterChange = (e) => {\n    setNameFilter(e.target.value);\n    setFilteredName(\n      persons.filter((person) =>\n        person.name.toLowerCase().includes(e.target.value.toLowerCase())\n      )\n    );\n  };\n\n  const deleteClick = (personTobeDeleted) => {\n    if (window.confirm(`Delete ${personTobeDeleted.name} ?`)) {\n      getPersons\n        .deleteObjectById(personTobeDeleted.id)\n        .then(\n          setPersons(\n            persons.filter((person) => person.id !== personTobeDeleted.id)\n          )\n        );\n      setErrorMessage(`Deleted ${newName} from phonebook`);\n      setTimeout(() => {\n        setErrorMessage(null);\n      }, 3000);\n    }\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage} />\n      <Filter value={nameFilter} onChange={filterChange} />\n      <h2>Add a New Person</h2>\n      <Form\n        onSubmit={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        nameChange={nameChange}\n        numberChange={numberChange}\n      />\n      <h2>Numbers</h2>\n      {nameFilter.length > 0 ? (\n        <Persons persons={filteredName} deleteClick={deleteClick}></Persons>\n      ) : (\n        <Persons persons={persons} deleteClick={deleteClick}></Persons>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}